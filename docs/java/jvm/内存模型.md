# Java 内存模型

Java 内存模型在 JDK1.7 主要包含以下区域。

- 程序计数器
- 虚拟机栈
- 本地方法栈
- 方法区
- 堆

而在JDK1.8中将运行时数据区中的方法区给取消，换成了元数据区放到了直接内存里。

- 程序计数器
- 虚拟机栈
- 本地方法栈
- 堆
- 元数据区

## 内存模型图


1. JDK 1.7 内存模型图

![](https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210611155359.png)

2. JDK 1.8 内存模型图

   JDK1.8中取消了运行时数据区中的方法区，换成了元数据区放到了直接内存里。

![](https://cdn.jsdelivr.net/gh/AlbertYang0801/pic-bed@main/img/20210611160927.png)



## 运行时数据区
### 1、程序计数器

程序计数器是是线程私有的，各个线程之间互不影响。保存的是程序执行到的指令地址。

- 如果线程执行的是非 native 方法，则程序计数器保存的是当前需要执行的指令地址。
- 如果线程执行的是 native 方法，则程序计数器中的值是 undefined。

由于程序计数器保存的数据占用空间不会随程序执行而改变，因为程序计数器是内存区域中没有规定 OutOfMemoryError 情况的区域。


### 2、本地方法栈
### 3、虚拟机栈
### 4、堆
### 5、方法区
### 6、运行时常量池
### 7、直接内存


## 参考链接

[Java内存管理-JVM内存模型以及JDK7和JDK8内存模型对比总结（三）](https://juejin.cn/post/6844903909983535111#heading-8)



