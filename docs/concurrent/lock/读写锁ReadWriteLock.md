### 读写锁ReadWriteLock
---
锁可分为排他锁和共享锁。`synchronized`和`ReentrantLock`都是排他锁，只允许线程独占资源。而在多个线程进行读操作的时候，单个线程占用资源进行读取，其他需要读取的线程会进行等待，而这种等待是不合理的。读写锁`ReadWriteLock`就是针对读操作和写操作进行的锁优化。

#### 读写锁互斥规则

- `读-读不互斥`：并发执行读操作，提高效率。
- `读-写互斥`：读会阻塞写，写也会阻塞读。
- `写-写互斥`：写线程会独占。

#### 注意事项

读写锁需要注意：

1. 读锁与读锁之间是不互斥的，读锁与写锁之间是互斥的。
2. 写锁与其它锁都是互斥的。
3. 保证写锁是独占资源的。
4. 读线程之间是并发执行的，而写线程执行的时候是独占的。能提高读线程的执行效率。



#### 读写锁的练习和可重入锁的效率对比

与可重入锁比较：

- 可重入锁是互斥的。
- 将读线程和写线程的锁换成可重入锁，之后线程会按照顺序执行，执行效率变慢。

#### 参考练习

[读写锁的练习和可重入锁的效率对比](https://gitee.com/zztiyjw/concurrent-practice/blob/master/src/test/java/com/albert/concurrent/book/chapterthree/ReadWriteLock_08.java)
