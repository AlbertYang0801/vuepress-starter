
### 四种拒绝策略
---
#### 直接抛出异常：AbortPolicy
>默认的任务拒绝策略，对于新增任务，拒绝处理，直接抛出RejectedExecutionException异常。

```
public static class AbortPolicy implements RejectedExecutionHandler {
    
    public AbortPolicy() { }

    public void rejectedExecution(Runnable r, ThreadPoolExecutor e) {
        //直接抛出异常
        throw new RejectedExecutionException("Task " + r.toString() +
                                             " rejected from " +
                                             e.toString());
    }
}
```

#### 调用当前线程：CallerRunsPolicy
>调用自己的线程来执行任务，不创建新的线程，而是用自己当前线程进行执行，会降低对于新任务的提交速度，影响整体性能。如果程序能够容许延时，并且不能丢弃每一个任务，即可采取这个策略。

```
public static class CallerRunsPolicy implements RejectedExecutionHandler {
    public CallerRunsPolicy() { }
    public void rejectedExecution(Runnable r, ThreadPoolExecutor e) {
        if (!e.isShutdown()) {
            //调用自己的线程执行
            r.run();
        }
    }
}
```

#### 不做处理： DiscardPolicy
>不做任何处理，直接丢掉该任务.

```
public static class DiscardPolicy implements RejectedExecutionHandler {
   
    public DiscardPolicy() { }

    public void rejectedExecution(Runnable r, ThreadPoolExecutor e) {
    }
}
```

#### 删除队列任务： DiscardOldestPolicy
>删除任务队列中最早的任务，将新增任务添加到任务队列中。


```
public static class DiscardOldestPolicy implements RejectedExecutionHandler {
   
    public DiscardOldestPolicy() { }

    public void rejectedExecution(Runnable r, ThreadPoolExecutor e) {
        if (!e.isShutdown()) {
            //删除线程池的任务队列的第一个元素
            e.getQueue().poll();
            e.execute(r);
        }
    }
}
```